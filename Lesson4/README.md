# Разработка мобильных компонент анализа безопасности информационно-аналитических систем

Поспелова Ульяна БИСО-03-20

## Практическая работа №4

### Привязка графических компонентов

Был создан новый проект Lesson4.

![1.png](1.png)

В файле build.gradle.kts необходимо включить ViewBinding. 

![2.png](2.png)

Путь до сгенерированного класса представлен ниже.

![3.png](3.png)

В файле разметки добавим некоторые графические элементы и установим соответствующие идентификаторы.

![4.png](4.png)

Запустим приложение и попробуем обратиться к элементам.

![5.png](5.png)

Требуется создать экран музыкального плеера с использованием «binding» для горизонтальной и портретной ориентации. Для этого создадим новый модуль "musicplayer".

![6.png](6.png)

Оформим графический интерфейс плеера.

![7.png](7.png)

Прописываем вызов в текстовое поле с помощью binding и запускаем приложение.

![8.png](8.png)

Далее переходим к горизонтальной ориентации экрана. Создаем файл activity_main (land).

![9.png](9.png)

Оформляем дизайн для горизонтальной ориентации экрана.

![10.png](10.png)

Запускаем наше приложение и проверяем корректное отображение элементов.

![11.png](11.png)

### Основные понятия асинхронной работы в ОС «Android»

Создадим новый модуль "thread".

![12.png](12.png)

Создадим графические элементы в файле разметки.

![13.png](13.png)

Теперь перейдем в файл MainActivity.java и напишем код, позволяющий рассчитать функцию в фоновом потоке и вывести её на экран. Запустим приложение.

![14.png](14.png)

Далее перейдем в модуль "app". Скорректируем MainActivity.java так, чтобы имя главного потока направлялось в textView и изменялось при каждом нажатии кнопки. Запустим приложение.

![15.png](15.png)

Добавим в главный поток код, имитирующий вычисления. После запуска приложения попробуем нажать на кнопку несколько раз.

![16.png](16.png)

Теперь добавим код для переноса вычислений в новые потоки и повторим предыдущий шаг. Результат запуска потоков можно увидеть с помощью Logcat.

![17.png](17.png)

### Передача данных между потоками

Создадим новый модуль "data_thread".

![18.png](18.png)

Создадим 3 «Runnable» в методе «onCreate», изменение экрана выполняется внутри метода «run».

![19.png](19.png)

Первые два метода отправляют «Runnable» на немедленную обработку, а третий позволяет указать задержку выполнения «Runnable».

![20.png](20.png)

При выполнении будет следующая очередность процессов: runn 1, runn 2, runn 3.

Изучим методы «runOnUiThread», «postDelayed», «post». В «TextView» установим значения строк и опишем различия между элементами и последовательность запуска.

![21.png](21.png)

Создадим новый модуль "looper".

![22.png](22.png)

В файле разметки создадим новую кнопку. Для обработки её нажатия требуется создать новый класс и описать его.

![23.png](23.png)

![24.png](24.png)

Далее отредактируем MainActivity.java.

![25.png](25.png)

Запустим приложение и увидим вывод возраста и места работы.

![26.png](26.png)

Создадим новый модуль "CryptoLoader".

![27.png](27.png)

Для реализации собственного загрузчика требуется создание класса и переопределение методов «loadInBackground» и «onStartLoading». Имя класса MyLoader.

![28.png](28.png)

![29.png](29.png)

Добавим элементы «EditText» и «Button».

![30.png](30.png)

Теперь создадим код для выполнения задания. Пользователь вводит фразу в «EditText», далее она шифруется с помощью алгоритма AES и передается вместе с ключом в «Loader». В «Loader» происходит дешифровка фразы и последующая передача в «MainActivity». Дешифрованная фраза отображается с помощью «toast» или «snackBar».

![31.png](31.png)

![32.png](32.png)

![33.png](33.png)

![34.png](34.png)

Запустим наше приложение и проверим работоспособность кода.

![35.png](35.png)

### Сервис

Создадим новый модуль "ServiceApp".

![36.png](36.png)

Создадим новый Service.

![37.png](37.png)

![38.png](38.png)

Убедимся в существовании записи о сервисе в секции «application» манифест-файла.

![39.png](39.png)

Требуется добавить функционал воспроизведения аудиофайла. Создадим директорию и перенесём в неё скачанную песню.

![40.png](40.png)

![41.png](41.png)

В файле разметки создадим две кнопки для воспроизведения и остановки музыки.

![42.png](42.png)

Теперь отредактируем созданный класс.

![43.png](43.png)

Изменим файл MainActivity.java.

![44.png](44.png)

В манифест-файле прописываем разрешения.

![45.png](45.png)

Запускаем приложение и 3 минуты наслаждаемся прекрасной песней.

![46.png](46.png)

### WorkManager

Создадим новый модуль "WorkManager".

![47.png](47.png)

В файл build.gradle.kts добавляем библиотеку для работы с worker.

![48.png](48.png)

В модуле требуется создать класс с родительским классом Worker.

![49.png](49.png)

![50.png](50.png)

В файле разметки создадим текстовое поле и кнопку для вывода статуса подключения к Интернету.

![51.png](51.png)

В MainActivity добавим вызов Worker и обработку нажатия созданной кнопки.

![52.png](52.png)

![53.png](53.png)

Запустим приложение и проверим его работоспособность.

![54.png](54.png)

Отключаем Интернет и проверяем подключение.

![55.png](55.png)

![56.png](56.png)

Подписи не влезли, ну ничего страшного)

### Контрольное задание (ветка mirea_project)

Переходим в ранее созданный проект и создаем новый фрагмент.

![57.png](57.png)

В файл build.gradle.kts добавляем библиотеку для работы с worker.

![58.png](58.png)

Реализуем такой же пример, как в предыдущем задании. Отредактируем файл разметки.

![59.png](59.png)

Создадим и опишем новый класс MyWorker.java.

![60.png](60.png)

Отредактируем файл фрагмента.

![61.png](61.png)

Запустим приложение и проверим его работоспособность.

![62.png](62.png)

![63.png](63.png)

Отключаем Интернет и проверяем подключение. В логах можно увидеть соответствующие сообщения.

![64.png](64.png)

![65.png](65.png)





